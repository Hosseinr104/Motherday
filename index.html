<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ÛŒÚ© Ù…Ø¹Ù…Ø§ÛŒ Ø¯ÛŒÚ¯Ù‡.</title>
  <style>
    :root{
      --bg:#fff8ff;
      --card:#fff;
      --accent:#ff6fb5;
      --accent-2:#ffd166;
      --muted:#6b6b6b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#ffe6f2 0%, #e6f7ff 100%);font-family: 'Tahoma', 'Vazirmatn', sans-serif;color:#2b2b2b;
    }
    .container{width:min(980px,95%);padding:18px;border-radius:16px;background:linear-gradient(180deg,rgba(255,255,255,0.95),rgba(255,255,255,0.8));box-shadow:0 10px 30px rgba(0,0,0,0.06)}
    header{display:block}
    h1{margin:0 0 8px 0;font-size:22px;color:#1e1e1e}
    .subtitle{color:var(--muted);font-size:14px;margin-bottom:12px}

    .board{display:grid;grid-template-columns:repeat(8,1fr);gap:8px;padding:8px;background:linear-gradient(180deg,#ffffff,#fff7fb);border-radius:12px}
    .cell{aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;border-radius:10px;background:linear-gradient(180deg,#fff,#fff4f8);font-size:22px;font-weight:700;cursor:pointer;user-select:none;box-shadow:0 4px 10px rgba(0,0,0,0.06);transition:transform .08s ease, box-shadow .12s ease}
    .cell:active{transform:translateY(2px)}
    .cell.selected{background:linear-gradient(90deg,#fff3c4,#fff7e0);}
    .cell.correct{background:linear-gradient(90deg,#c9ffca,#e6ffe8);}
    .cell.wrong{animation:shake .3s}
    @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)}}

    .info{padding:12px;border-radius:10px;background:linear-gradient(180deg,#fff,#f8fffd);box-shadow:inset 0 1px 0 rgba(255,255,255,0.6);margin-bottom:12px}
    .hint{font-size:15px;margin:0}
    .controls{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
    button{padding:8px 12px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600;cursor:pointer}
    button.secondary{background:var(--accent-2);color:#2b2b2b}

    .celebration{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .message{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);z-index:10}
    .message .box{background:linear-gradient(135deg,#fff,#ffe9ff);padding:34px 26px;border-radius:22px;box-shadow:0 30px 80px rgba(0,0,0,0.35);font-size:28px;font-weight:900;color:#333;text-align:center;line-height:1.8;animation:pop 0.6s cubic-bezier(.2,1.4,.3,1)}
    @keyframes pop{0%{transform:scale(0.4) rotate(-8deg);opacity:0}70%{transform:scale(1.1) rotate(3deg)}100%{transform:scale(1) rotate(0)}}

    @media (max-width:520px){.container{padding:14px}h1{font-size:20px}.cell{font-size:18px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>ÛŒÚ© Ù…Ø¹Ù…Ø§ÛŒ Ø¯ÛŒÚ¯Ù‡.</h1>
      <div class="subtitle">ÙÙ‚Ø· ÛŒÚ© Ú©Ù„Ù…Ù‡Ù” Ù…Ø¹Ù†Ø§Ø¯Ø§Ø± Ø¯Ø§Ø®Ù„ Ø¬Ø¯ÙˆÙ„ Ù‡Ø³Øª.</div>
    </header>

    <div class="info">
      <p class="hint">Ø±Ø§Ù‡Ù†Ù…Ø§: Ø±ÙˆÛŒ Ù‡Ø± Ø³Ù‡ Ø­Ø±Ù Ú©Ù‡ Ø¯ÙˆØ³Øª Ø¯Ø§Ø±ÛŒ Ø¨Ø²Ù† â€” ÙˆÙ‚ØªÛŒ Ø±ÙˆÛŒ Ù‡Ø± Ø­Ø±Ù Ø¨Ø²Ù†ÛŒ Ø²Ø±Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø¨Ø¹Ø¯ Ø§Ø² Ø³Ù‡ Ø§Ù†ØªØ®Ø§Ø¨ØŒ Ø§Ú¯Ø± Ú©Ù„Ù…Ù‡ Ø¯Ø±Ø³Øª Ø¨Ø§Ø´Ø¯ Ø¢Ù†â€ŒÙ‡Ø§ Ø³Ø¨Ø² Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯ Ùˆ ÛŒÚ© Ø¬Ø´Ù† Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
    </div>

    <div class="board" id="board" aria-label="Ø¬Ø¯ÙˆÙ„ Ø­Ø±ÙˆÙ"></div>

    <div class="controls">
      <button id="resetBtn" class="secondary">Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ</button>
    </div>

  </div>

  <div class="message" id="message">
    <div class="box">ğŸ¦‰<br><strong>Ø¢Ø¢Ø¢Ø¢Ø¢ÙØ±ÛŒÛŒÛŒÛŒÙ†!!!</strong><br><br>Ø­Ø§Ù„Ø§ Ø¨Ø±Ø§ÛŒ Ø§Ø¯Ø§Ù…Ù‡ Ú©Ø§Ø± ÙÙ‚Ø· Ú©Ø§ÙÛŒÙ‡<br>Ø¨Ù‡ Ø¬ØºØ¯ Ø¯Ø§Ù†Ø§ Ù…Ø±Ø§Ø¬Ø¹Ù‡ Ú©Ù†ÛŒ.<br>Ø§ÙˆÙ† Ù…Ø±Ø­Ù„Ù‡ Ø¢Ø®Ø±Ùˆ Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù‡.</div>
  </div>
  </div>
  <div class="celebration" id="celebration"></div>

  <script>
    // ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø§Ø²ÛŒ
    const secretWord = ['Ø¬','Øº','Ø¯'];
    const rows = 8;
    const cols = 6;

    // Ù…ÙˆÙ‚Ø¹ÛŒØª Ø«Ø§Ø¨Øª Ø±Ù…Ø² (Ù…ÛŒâ€ŒØªÙˆØ§Ù† ØªØºÛŒÛŒØ± Ø¯Ø§Ø¯ ÛŒØ§ ØªØµØ§Ø¯ÙÛŒâ€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯)
    const secret = {row:3, col:1, dir:'v'}; // dir = 'h' ÛŒØ§ 'v'

    // Ø­Ø±Ùâ€ŒÙ‡Ø§ÛŒ ØªØµØ§Ø¯ÙÛŒ Ú©Ù‡ Ù…Ø¹Ù†ÛŒ Ù†Ø¨Ø§Ø´Ù†Ø¯ (ØªØ§ Ø­Ø¯ Ø§Ù…Ú©Ø§Ù†)
    const pool = ['Ø¨','Ù¾','Øª','Ø«','Ø³','Ø´','Øµ','Ø¶','Ø·','Ø¸','Ø¹','Ú©','Ú¯','Ù„','Ù…','Ù†','Ùˆ','Ù‡','ÛŒ','Ú†','Ú˜'];

    const boardEl = document.getElementById('board');
    const messageEl = document.getElementById('message');
    const celebrationEl = document.getElementById('celebration');

    let cells = [];
    let selected = [];

    function makeGrid(){
      boardEl.innerHTML = '';
      cells = [];
      boardEl.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;

      const gridLetters = Array.from({length: rows}, ()=>Array(cols).fill(null));

      function safePick(r,c){
        let tries = 0;
        while(true){
          const l = pick(pool);
          const neighbors = [
            [r-1,c],[r+1,c],[r,c-1],[r,c+1],
            [r-1,c-1],[r-1,c+1],[r+1,c-1],[r+1,c+1]
          ];
          const clash = neighbors.some(([nr,nc])=>
            nr>=0 && nr<rows && nc>=0 && nc<cols && gridLetters[nr][nc]===l
          );
          if(!clash || tries>20) return l;
          tries++;
        }
      }

      for(let r=0; r<rows; r++){
        for(let c=0; c<cols; c++){
          const div = document.createElement('div');
          div.className = 'cell';
          const pos = `${r}-${c}`;
          div.dataset.pos = pos;

          const letter = safePick(r,c);
          gridLetters[r][c] = letter;

          div.dataset.letter = letter;
          div.textContent = letter;
          boardEl.appendChild(div);
          cells.push(div);
          div.addEventListener('click', ()=>onCellClick(div));
        }
      }

      // Ù‚Ø±Ø§Ø± Ø¯Ø§Ø¯Ù† Ø­Ø±Ùâ€ŒÙ‡Ø§ÛŒ Ø±Ù…Ø²
      for(let i=0;i<3;i++){
        const r = secret.row + (secret.dir==='v'?i:0);
        const c = secret.col + (secret.dir==='h'?i:0);
        const idx = r*cols + c;
        const cell = cells[idx];
        cell.dataset.letter = secretWord[i];
        cell.textContent = secretWord[i];
      }
    }

    function pick(arr){return arr[Math.floor(Math.random()*arr.length)];}

    function onCellClick(cell){
      if(cell.classList.contains('correct')) return;
      if(selected.includes(cell)) return;

      cell.classList.add('selected');
      selected.push(cell);

      if(selected.length===3){
        checkAnswer();
      }
    }

    function checkAnswer(){
      const coords = selected.map(d=>d.dataset.pos.split('-').map(Number));
      const expected = [];
      for(let i=0;i<3;i++){
        const r = secret.row + (secret.dir==='v'?i:0);
        const c = secret.col + (secret.dir==='h'?i:0);
        expected.push([r,c]);
      }
      const match = coords.every((xy,i)=>xy[0]===expected[i][0] && xy[1]===expected[i][1]);

      if(match){
        selected.forEach(s=>{s.classList.remove('selected'); s.classList.add('correct');});
        celebrate();
      } else {
        selected.forEach(s=>s.classList.add('wrong'));
        setTimeout(()=>{
          selected.forEach(s=>{s.classList.remove('selected','wrong');});
          selected = [];
        },600);
      }
    }

    function celebrate(){
      messageEl.style.display='flex';
      megaConfetti();
      screenBoom();
      document.querySelector('.container').style.pointerEvents='none';
    }

    function megaConfetti(){
      const colors = ['#ff6fb5','#ffd166','#6ee7b7','#9ad0ff','#ffb4a2','#c77dff'];
      const amount = 180;
      for(let i=0;i<amount;i++){
        const c = document.createElement('div');
        c.style.position='absolute';
        c.style.width = (6+Math.random()*10)+'px';
        c.style.height = (6+Math.random()*14)+'px';
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        c.style.left = Math.random()*100+'%';
        c.style.top = '-10%';
        c.style.opacity = '1';
        c.style.borderRadius = Math.random()>0.5?'50%':'3px';
        c.style.pointerEvents='none';
        celebrationEl.appendChild(c);

        const dur = 1200 + Math.random()*1200;
        c.animate([
          {transform:`translateY(0) rotate(0deg)`},
          {transform:`translateY(${window.innerHeight+200}px) rotate(${Math.random()*1080-540}deg)`}
        ],{duration:dur,easing:'cubic-bezier(.1,.8,.2,1)'});

        setTimeout(()=>c.remove(),dur);
      }
    }

    function screenBoom(){
      document.body.animate([
        {transform:'scale(1)'},
        {transform:'scale(1.03)'},
        {transform:'scale(1)'}
      ],{duration:500,easing:'ease-out'});
    }

    document.getElementById('resetBtn').addEventListener('click', ()=>{
      selected = [];
      document.querySelector('.container').style.pointerEvents='auto';
      messageEl.style.display='none';
      celebrationEl.innerHTML='';
      // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§
      cells.forEach(s=>{ if(s){ s.classList.remove('selected','correct','wrong'); }});
      makeGrid();
    });

    // Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
    makeGrid();
  </script>
</body>
</html>
